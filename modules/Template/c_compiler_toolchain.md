# MSYS2: GNU Tools for windows

`{'mod':'speak'}` MSYS2 Software Distribution and Building Platform for Windows
MSYS2 is a collection of tools and libraries providing you with an easy-to-use environment for building, installing and running native Windows software.

> `{'mod':'tag','type':'info'}` 
> 
> `{'mod':'speak'}` The reason for why we chosen MSYS2 is because it provide an easy way to installation of packages. To keep them updated it features a package management system called `Pacman`, which should be familiar to Arch Linux users. It brings many powerful features such as dependency resolution and simple complete system upgrades, as well as straight-forward and reproducible package building. The MSYS2 package repository contains more than 1800 pre-built packages ready to install.

# GNU Installation

`{'mod':'speak'}` The G.N.U. toolchain is a broad collection of programming tools produced by the G.N.U. Project. These tools form a toolchain (a suite of tools used in a serial manner) used for developing software applications and operating systems.

> `{'mod':'tag','type':'warning'}` 
> `{'mod':'speak'}` Before we start the installation of the GCC Compiler tool chain, you must first install MSYS2. To do so you may follow the instruction refer the link: [here](https://www.msys2.org/).

 `{'mod':'speak'}` Assuming that you have successfully installed MSYS2, complete the following steps to have GCC installed.

1. Run MSYS2 x64. In doing so you should see a terminal window pop-up like this:
   
   `{'mod':'img','url':'$/_res/gcc-installation/step-01-cmdwnd.jpg'}`
   
2. `{'mod':'speak'}` Within the terminal window enter the following command, then press <kbd>Enter</kbd> to run it.
   ```{'mod':'code','lang':'bash'}
   pacman -S mingw-w64-x86_64-gcc
   ```
  
3.  `{'mod':'speak'}` Then a message like the following will appear. Now type "Y" for Yes and press <kbd>Enter</kbd> to proceed with the installation:

   ```{'mod':'code','lang':'bash'}
    resolving dependencies...
    looking for conflicting packages...

    Packages (1) mingw-w64-x86_64-gcc-9.3.0-2

    Total Installed Size:  XXX.XX MiB
    Net Upgrade Size:       XX.XX MiB

    :: Proceed with installation? [Y/n]
    Interrupt signal received
   ```
   
   > `{'mod':'tag','type':'remember'}`
   >  `{'mod':'speak'}` You must ensure that your PC is connected to the internet during the installation. If the connection fails during this time, you may resume by repeating step 2.
   >
   > `{'mod':'tag','type':'tip'}`
   >  `{'mod':'speak'}` You may use the **up** or **down** arrow keys to select a command you've entered in the past. This feature can save you from repeatedly typing the same command all over again.
4. `{'mod':'speak'}` At this stage, you should have completed the installation of the GCC toolchain. To test if the process completed successfully enter the following command and press <kbd>Enter</kbd> to run it.
   ```{'mod':'code','lang':'bash'}
   pacman -S mingw-w64-x86_64-gcc
   ```

   `{'mod':'speak'}` Then some configuration text about the GCC installation should appear like this:

   ```{'mod':'code','lang':'bash','highlight':'2,8'}
    Using built-in specs.
    COLLECT_GCC=C:\msys64\mingw64\bin\gcc.exe
    COLLECT_LTO_WRAPPER=C:/msys64/mingw64/bin/..
    ...
    [Some more text]
    ...
    Thread model: posix
    gcc version 9.3.0 (Rev2, Built by MSYS2 project)
   ```
   `{'mod':'speak'}` Please note, as highlighted above:
   - line 2, contains the path where the gcc tool chain binaries is located.
   - line 8, indicate the version of the compiler we are using. This is important as the "object code" generated by different compiler versions are not compatible. This means that you cannot compile part of your source code in one compiler and be able to link them with ones that were compiled under a compiler of a different version.
  
## What is *Object-code*?

`{'mod':'speak'}` Object codes are the product of a compiler. In a general sense, object code is the raw machine codes the CPU understands, which is generated by the C source code written by the programmer. In the next section, we will dwell into more detail on how object files (the file containing the object codes) are created using GCC toolchain.

## What is a *File-path*?
`{'mod':'speak'}` Path to a file is the textual description of the address of a device, folder or file. Under windows, the syntax of an example file-path `C:\msys64\mingw64\bin\gcc.exe` can be interpreted as follows:

| Drive Letter | Folder(s) (aka: Directories) |   File    |
| :----------: | :--------------------------: | :-------: |
|    `c:\`     |     `msys64\mingw64\bin`     | `gcc.exe` |

You may open the path graphically via "file explorer" as shown in the diagram below:

`{'mod':'img','url':'$/_res/gcc-installation/filepaths.jpg'}`

# Setup windows **PATH** variable

`{'mod':'speak'}` The PATH variable is an environment variable on Microsoft Windows, specifying a set of directories where executable programs are located. For the GCC's to work properly later on with VSC, we must add the GCC **bin** folder path to the Windows path variable. This is done via the following steps:

> `{'mod':'tag','type':'warning'}`
> `{'mod':'speak'}` The following instructions only works with Windows 10 and Windows 8. If you are running an older version of MS Windows, it is adviced that your system should be upgraded to Windows 10 so that all software tools used in the course may functions properly.

1. `{'mod':'speak'}` In Search, search for and then select: System (Control Panel) by performing the following actions:
   1. Type "control" in the app search box
   2. Select the "Control panel" App
   3. click on the "System" option
   
   `{'mod':'img','url':'$/_res/windows-path/step01-ctrlPanel.jpg'}`
2. `{'mod':'speak'}`  Click the Advanced system settings link. Then Click Environment Variables
   
    `{'mod':'img','url':'$/_res/windows-path/step02-ctrlPanel.jpg'}`

3. `{'mod':'speak'}` In the section System Variables:
   
   1. Find the PATH environment variable and select it.
   2. Click Edit.
   
    `{'mod':'img','url':'$/_res/windows-path/step03-ctrlPanel.jpg'}`
    
    *If the PATH environment variable does not exist, click New.*

4. `{'mod':'speak'}`Through the Edit System Variable (or New System Variable) window check if the entry "C:\msys64\mingw64\bin" exits. If not then do the following:
   
   1.  Click the "New" button.
   2.  Type the following into the new entry "C:\msys64\mingw64\bin"
   3.  Click OK. Close all remaining windows by clicking OK.

   `{'mod':'img','url':'$/_res/windows-path/step04-ctrlPanel.jpg'}`

## Test if **PATH** was set properly

To test if the path variable was set properly perform the following steps:

1. `{'mod':'speak'}` Open command prompt by:
   1. Type "cmd" in the app search bar
   2. click on the Command Prompt App
   
     `{'mod':'img','url':'$/_res/cmd/step01-cmd-test.jpg'}`

2. `{'mod':'speak'}` In the Command Prompt window type the following command and 
   press <kbd>enter</kbd> to run it
   
   `gcc -v`

  `{'mod':'speak'}` And if the output looked similar to text below then the PATH variable was set properly.

    ```{'mod':'code','lang':'bash'}
    Using built-in specs.
    COLLECT_GCC=C:\msys64\mingw64\bin\gcc.exe
    COLLECT_LTO_WRAPPER=C:/msys64/mingw64/bin/..
    ...
    [Some more text]
    ...
    Thread model: posix
    gcc version 9.3.0 (Rev2, Built by MSYS2 project)
   ```